---
objects:
  - MJFlogo: DAStaticFile.using(filename='FLPN_logo4.png')
---
mandatory: True
code: |
  set_parts(logo='<img src="' + MJFlogo.url_for() + '" style="height: 60px;">')
---
metadata:
  title: |
    Family Law Directory
  short title: |
    PLACEHOLDER SHORT TITLE
  organisation: Flinders University
  show login: false
---
default screen parts:
  post: |
    <div style="display: flex; height: 200px; align-items: flex-end; flex-direction: row-reverse">
    <div style="margin: 5px"><img src="https://staff.flinders.edu.au/etc.clientlibs/flinders/clientlibs/clientlib-site/resources/images/flinderuni_main_logo_black.png" height="40">
    </div>
    <div style="margin: 5px; text-align: left; color: rgb(102, 102, 102)">
    <cite><small><i>
    Developed by Flinders University in collaboration with Relationships Australia (SA) <br> <div style="text-align: right; color: rgb(173, 173, 173)"> Icons provided by <a href='http://www.flaticon.com/authors/freepik'>Freepiks</a></div>
    </i></small></cite>
    </div>
    </div>
---
# add all other yml files here
include:
  - FLPN_Welcome.yml
# Make sure not to change order, otherwise welcome screen might not be run first
  - FLPN_Questions.yml
  - FLPN_DirectoryEntries.yml
  - FLPN_display_output.yml
  - FLPN_design.yml
---
objects:
  - FLPNeligibleEntries: DAList.using(there_are_any=True, auto_gather=False)
  - endpoints: DADict
---
features:
  css: FLPN.css
  debug: true
  hide standard menu: false
  question back button: True
  navigation back button: False
  progress bar: True
  navigation: horizontal
  small screen navigation: true
---
sections:
  - Welcome
  - Location
  - Language
  - Results
---
# This code drives the app
mandatory: True
code: |
  # make empty DAlist
  FLPNeligibleEntries.clear()
  
  for entry in FLPN2_lawyerlist:
    # set all entries to eligible by default
    entry["eligible"] = True
    
    # Check whether user selected service area that this lawyer candidate services
    if not (int(FLPNregion) in entry.item("service_area")):
      entry["eligible"] = False
    
    # Check whether user said they need a non-English speaking lawyer, and that this lawyer candidate said they do not speak more than one language.
    if (FLPNlanguage == True) and (entry["language"] == False):
      entry["eligible"] = False
    
    # when entry ends this process as "eligible" append to eligibleEntries list
    if entry["eligible"] == True:
      FLPNeligibleEntries.append(entry)
  
  #signal that this block gathers FLPNeligibleEntries
  FLPNeligibleEntries.gathered = True
  
  #go to final screen
  endpoints['final_screen']
  
  menu_items = [ action_menu_item('Roadmap', 'road_map') ]
---
event: endpoints['final_screen']
question: ""
subquestion: |
  <!-- REMEMBER to use HTML comment tags in html area, otherwise adding regular comments makes docassemble think it's the end of the "subquestion", and it gives parserError (beware: HTML comments are visible to users in inspect element) -->
  <!-- 3 different options -->
  <div class='resultstitle'> BASED ON YOUR RESPONSES </div>
  <!-- 1) launage + area -->
  
  <!-- % if FLPNlanguage == 'true': -->
  % if len(FLPNeligibleEntries) > 0:
   <br>Here is a list of ${ FLPNeligibleEntries.number() } family lawyers matching your search criteria. Please contact the lawyers below for more information.
   
   <div class='disclaimer'>The information below is what has been provided by the lawyers themselves. We cannot guaruntee the accuracy of this information, and cannot be held responsible for any issues that may arise with their engagement.</div>
   
  &nbsp; | &nbsp;
  ---------------|----------------
  %for entry in FLPNeligibleEntries:
  <span class='agencytable'> ${ entry['display_record'] } </span> | &nbsp;
  %endfor
  % endif
  <!-- % endif -->

  <!-- 2) just area, no language -->
  <!-- % if FLPNlanguage == 'false':
  % if len(FLPNeligibleEntries) > 0:
   <br>Here is a list of ${ FLPNeligibleEntries.number() } family lawyers in your area. Contact the lawyers below for more information.
   
   <div class='disclaimer'>The information below is what has been provided by the lawyers themselves. We cannot guaruntee the accuracy of this information, and cannot be held responsible for any issues that may arise with their engagement.</div>
   
  &nbsp; | &nbsp;
  ---------------|----------------
  %for entry in FLPNeligibleEntries:
  <span class='agencytable'> ${ entry['display_record'] } </span> | &nbsp;
  %endfor
  % endif
  <!-- % endif -->

  <!-- Here is a list of ${ FLPNeligibleEntries.number() } family lawyers in your region. Contact the lawyers below for more information. --!>

  <!-- 3) No eligible lawyers found -->
  
  % if len(FLPNeligibleEntries) < 1:
  <br>Unfortunately, we weren't able to find any lawyers matching your search criteria. You can try searching in a different region. Otherwise you will need to make your own enquiries into finding a family lawyer.<br><br>
  % endif

  <!-- DISPLAY NO MATTER WHAT -->
   <div class='resultstitle'> LINKS TO MORE INFORMATION </div><br>
   <center> [The Law Society of South Australia](https://www.lawsocietysa.asn.au)</center>
   <center>[Legal Services Commission of South Australia](https://lsc.sa.gov.au)</center> <br>
attachment code: |
  FLPNprintout
buttons:
  - Exit: exit
    url: https://www.pathwaysnetworksa.com.au
  - Restart: restart
progress: 100
section: Results
---
attachment: 
  - name: Send a Copy
    filename: Lawyer List
    valid formats:
      - pdf
    docx template file: FLPN_print_out.docx
    variable name: FLPNprintout
---