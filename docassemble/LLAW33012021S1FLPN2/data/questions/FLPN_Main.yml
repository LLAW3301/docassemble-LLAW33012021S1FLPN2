# This is the main file for the Lawyer Directory App (FLPN)
---
metadata:
  title: |
    PLACEHOLDER
  short title: |
    PLACEHOLDER SHORT TITLE
  organisation: Flinders University
  show login: True
---
default screen parts:
  post: |
    <div style="display: flex; height: 200px; align-items: flex-end; flex-direction: row-reverse">
    <div style="margin: 5px"><img src="https://staff.flinders.edu.au/etc.clientlibs/flinders/clientlibs/clientlib-site/resources/images/flinderuni_main_logo_black.png" height="40">
    </div>
    <div style="margin: 5px; text-align: right">
    <cite><small><i>
    Developed by Flinders University
    </i></small></cite>
    </div>
    </div>
---
# add all other yml files here
include:
  - FLPN_Welcome.yml
# Make sure not to change order, otherwise welcome screen might not be run first
  - FLPN_Questions.yml
  - FLPN_DirectoryEntries.yml
#  - FLPN_design.yml
---
objects:
  - FLPNeligibleEntries: DAList.using(there_are_any=True, auto_gather=False)
  - endpoints: DADict
---
features:
  css: FLPN.css
  debug: True
  hide standard menu: False
---
# This code drives the app
mandatory: True
code: |
  # make empty DAlist
  FLPNeligibleEntries.clear()
  
  for entry in FLPN2_lawyerlist:
    # set all entries to eligible by default
    entry["eligible"] = True
    
    # process for eligibility (placeholder right now)
    if entry["lawyer"] == "Kerry Antoniou":
      entry["eligible"] = False
    # need to add in process to check if candidate is in correct area/does/doesn't need a language other than English
    
    # when entry ends this process as "eligible" append to eligibleEntries list
    if entry["eligible"] == True:
      FLPNeligibleEntries.append(entry)
  
  FLPNeligibleEntries.gathered = True
  endpoints['final_screen']
---
event: endpoints['final_screen']
question: ""
subquestion:  |
  Final screen (display output here)
  
  number: ${ FLPNeligibleEntries.number() }
  
  %for entry in FLPNeligibleEntries:
  ${ entry["lawyer"] } <br>
  %endfor
buttons:
  - Exit: exit
    url: http://example.com/
  - Restart: restart
---
event: endpoints['ineligible']
question: Not Eligible
subquestion: |
  Not Eligible text
buttons:
  - Exit: exit
    url: http://example.com/
  - Restart: restart
---
